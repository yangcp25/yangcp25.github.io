<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.147.4"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>yangcp</title>

<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css" integrity="sha256-IhHKMWS&#43;eDACT2qtKzouUghDpk&#43;PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" type="application/json" href="http://localhost:1313/index.json">
<link rel="alternate" hreflang="en" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="yangcp (Alt + H)">yangcp</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tag">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/me/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">æ’åºç®—æ³•æ€»ç»“
    </h2>
  </header>
  <div class="entry-content">
    <p>æ€»ç»“â€”â€”æ‰€æœ‰å¸¸è§æ’åºç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ã€ç¨³å®šæ€§ã€æ˜¯å¦åŸåœ°æ’åºã€é€‚ç”¨åœºæ™¯å’Œç®€å•ä¾‹å­ã€‚ ä¸‹é¢æ˜¯æœ€å…¨é¢ä¸”é¢è¯•å¯¼å‘çš„æ€»ç»“ç‰ˆæœ¬ğŸ‘‡
ğŸ§  æ’åºç®—æ³•æ€»è§ˆè¡¨ ç®—æ³• æ€æƒ³ æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ åŸåœ°æ’åº é€‚ç”¨åœºæ™¯ å†’æ³¡æ’åº (Bubble Sort) ç›¸é‚»äº¤æ¢ï¼Œæœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ é€æ­¥â€œæµ®å‡ºâ€ O(nÂ²) O(1) âœ… ç¨³å®š âœ… æ•°æ®é‡å°ã€éƒ¨åˆ†æœ‰åº é€‰æ‹©æ’åº (Selection Sort) æ¯æ¬¡é€‰æ‹©æœ€å°å…ƒç´ æ”¾åˆ°å‰é¢ O(nÂ²) O(1) âŒ ä¸ç¨³å®š âœ… æ•°æ®é‡å°ï¼Œå¯¹äº¤æ¢æ¬¡æ•°æ•æ„Ÿ æ’å…¥æ’åº (Insertion Sort) å°†æœªæ’åºå…ƒç´ æ’å…¥åˆ°å·²æ’åºåºåˆ—ä¸­ O(nÂ²) O(1) âœ… ç¨³å®š âœ… æ•°æ®åŸºæœ¬æœ‰åºæ—¶é«˜æ•ˆ å¸Œå°”æ’åº (Shell Sort) æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆï¼Œåˆ†ç»„æ¯”è¾ƒå‡å°‘äº¤æ¢ O(nÂ¹Ë™Â³~nÂ²) O(1) âŒ ä¸ç¨³å®š âœ… ä¸­ç­‰è§„æ¨¡æ•°æ® å½’å¹¶æ’åº (Merge Sort) åˆ†æ²» &#43; åˆå¹¶æœ‰åºå­åºåˆ— O(n log n) O(n) âœ… ç¨³å®š âŒ å¤§æ•°æ®ã€å¤–éƒ¨æ’åº å¿«é€Ÿæ’åº (Quick Sort) åˆ†æ²» &#43; åŸºå‡†åˆ’åˆ† å¹³å‡ O(n log n)æœ€å O(nÂ²) O(log n) âŒ ä¸ç¨³å®š âœ… é€šç”¨æœ€å¿«çš„å†…éƒ¨æ’åº å †æ’åº (Heap Sort) åˆ©ç”¨å †ç»“æ„ç»´æŠ¤æœ€å¤§/æœ€å°å€¼ O(n log n) O(1) âŒ ä¸ç¨³å®š âœ… éœ€è¦å¿«é€Ÿæ‰¾æœ€å¤§/æœ€å°çš„åœºæ™¯ è®¡æ•°æ’åº (Counting Sort) ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°æ¬¡æ•° O(n &#43; k) O(n &#43; k) âœ… ç¨³å®š âŒ æ•´æ•°ã€èŒƒå›´è¾ƒå°çš„åœºæ™¯ æ¡¶æ’åº (Bucket Sort) æŒ‰åŒºé—´åˆ’åˆ†å¤šä¸ªæ¡¶å†åˆ†åˆ«æ’åº O(n &#43; k) O(n &#43; k) âœ… ç¨³å®šï¼ˆè§†å­æ’åºï¼‰ âŒ æ•°æ®å‡åŒ€åˆ†å¸ƒçš„æµ®ç‚¹æ•° åŸºæ•°æ’åº (Radix Sort) æŒ‰ä½ï¼ˆä¸ªä½â†’é«˜ä½ï¼‰æ’åº O(dÂ·(n&#43;k)) O(n &#43; k) âœ… ç¨³å®š âŒ æ•´æ•°ã€å­—ç¬¦ä¸²æ’åº ğŸ” å„ç®—æ³•æ ¸å¿ƒæ€æƒ³è®²è§£ä¸ä»£ç ç¤ºä¾‹ 1ï¸âƒ£ å†’æ³¡æ’åº Bubble Sort æ¯ä¸€è½®ä¸¤ä¸¤æ¯”è¾ƒï¼ŒæŠŠæœ€å¤§å€¼â€œå†’æ³¡â€åˆ°æœ€åã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-05 09:29:18 +0800 CST'>November 5, 2025</span>&nbsp;Â·&nbsp;5 min</footer>
  <a class="entry-link" aria-label="post link to æ’åºç®—æ³•æ€»ç»“" href="http://localhost:1313/posts/datastructalgorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">å†…å­˜åˆ†é…
    </h2>
  </header>
  <div class="entry-content">
    <p>goçš„å†…å­˜åˆ†é… æ ¹æ®å¯¹è±¡å¤§å°çš„ä¸åŒï¼Œgoçš„å†…å­˜åˆ†é…æœ‰3ç§ç±»å‹ï¼š Tiny(size &lt; 16B): Objects of size less than 16 bytes are allocated using the mcacheâ€™s tiny allocator. This is efficient and multiple tiny allocations are done on a single 16-byte block. Small(size 16B ~ 32KB): Objects of size between 16 bytes and 32 Kilobytes are allocated on the corresponding size class(mspan) on mcache of the P where the G is running. In both tiny and small allocation if the mspanâ€™s list is empty the allocator will obtain a run of pages from the mheap to use for the mspan. If the mheap is empty or has no page runs large enough then it allocates a new group of pages (at least 1MB) from the OS. Large(size &gt; 32KB): Objects of size greater than 32 kilobytes are allocated directly on the corresponding size class of mheap. If the mheap is empty or has no page runs large enough then it allocates a new group of pages (at least 1MB) from the OS. æ€»ç»“ä¸€ä¸‹Goæ˜¯å¦‚ä½•è¿›è¡Œå†…å­˜åˆ†é…: mcacheä¸­å¦‚æœæœ‰ç©ºé—²çš„ç©ºé—´ï¼Œ é‚£ä¹ˆç›´æ¥åœ¨mcacheåˆ†é… mcacheå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°è¯•å»mcentralä¸­è·å–ä¸€ä¸ªç©ºé—²çš„mspan mcentralä¸­ä¹Ÿå’©æœ‰å¯ç”¨çš„mspanï¼Œé‚£ä¹ˆç›´æ¥å»mheapå‘æ“ä½œç³»ç»Ÿç”³è¯·å¯ç”¨çš„mspan
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-31 18:10:00 +0800 CST'>October 31, 2025</span>&nbsp;Â·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to å†…å­˜åˆ†é…" href="http://localhost:1313/posts/go/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ä¸‰æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯å‘é€synï¼Œå®¢æˆ·ç«¯ä»close-&gt;syn-send synæœåŠ¡ç«¯æ”¶åˆ°syn ,åŒæ—¶å‘å®¢æˆ·ç«¯å‘é€syn.ack ï¼Œè‡ªå·±ä»listenå˜æˆ syn-recd å®¢æˆ·ç«¯æ”¶åˆ°syn-ackä¼šåœ¨å‘é€ä¸€ä¸ªack,è‡ªå·±å˜æˆestablished,æœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ªackï¼Œè‡ªå·±å˜æˆestablishedã€‚ </p>
  </div>
  <footer class="entry-footer"><span title='2025-10-29 20:34:20 +0800 CST'>October 29, 2025</span>&nbsp;Â·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" href="http://localhost:1313/posts/network/tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">sqlé«˜é¢‘é¢˜
    </h2>
  </header>
  <div class="entry-content">
    <p>åˆ†ä¸ºå…­ä¸ªç»´åº¦ï¼šåŸºç¡€èšåˆ â†’ å­æŸ¥è¯¢ â†’ TopN â†’ çª—å£å‡½æ•° â†’ ä¸šåŠ¡å»ºæ¨¡ â†’ æ€§èƒ½ä¼˜åŒ–ã€‚
ğŸ¯ é«˜é¢‘ SQL é¢˜åº“ï¼ˆå«ç­”æ¡ˆä¸æ€è·¯ï¼‰ ä¸€ã€åŸºç¡€èšåˆä¸åˆ†ç»„ï¼ˆGROUP BY / HAVINGï¼‰ ğŸ§© é¢˜ 1ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ è¡¨ç»“æ„ï¼š
employee(emp_id, emp_name, dept_id, salary) SQLï¼š
SELECT dept_id, AVG(salary) AS avg_salary FROM employee GROUP BY dept_id; ğŸ“˜ è€ƒç‚¹ï¼š èšåˆå‡½æ•° &#43; åˆ†ç»„
ğŸ§© é¢˜ 2ï¼šæŸ¥è¯¢å¸¦å­¦ç”Ÿæ•°è¶…è¿‡ 10 äººçš„è€å¸ˆ teacher(teacher_id, name) student(student_id, teacher_id) SQLï¼š
SELECT teacher_id, COUNT(*) AS student_count FROM student GROUP BY teacher_id HAVING COUNT(*) &gt; 10; ğŸ“˜ è€ƒç‚¹ï¼š HAVING ä¸ WHERE çš„åŒºåˆ«ï¼ˆHAVING é’ˆå¯¹èšåˆåè¿‡æ»¤ï¼‰
äºŒã€å­æŸ¥è¯¢ï¼ˆSubqueryï¼‰ ğŸ§© é¢˜ 3ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ SELECT e.emp_name, e.salary FROM employee e JOIN ( SELECT dept_id, AVG(salary) AS avg_salary FROM employee GROUP BY dept_id ) d ON e.dept_id = d.dept_id WHERE e.salary &gt; d.avg_salary; ğŸ“˜ è€ƒç‚¹ï¼š ç›¸å…³å­æŸ¥è¯¢ vs éç›¸å…³å­æŸ¥è¯¢
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-27 10:26:15 +0800 CST'>October 27, 2025</span>&nbsp;Â·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to sqlé«˜é¢‘é¢˜" href="http://localhost:1313/posts/sql/%E9%AB%98%E9%A2%91%E9%A2%98/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Liunxå¸¸ç”¨å‘½ä»¤
    </h2>
  </header>
  <div class="entry-content">
    <p>Linux ä¸­éå¸¸å¸¸ç”¨å’ŒåŸºç¡€çš„å‘½ä»¤ï¼ŒæŒ‰ç…§åŠŸèƒ½è¿›è¡Œäº†åˆ†ç±»ï¼š
1. æ–‡ä»¶å’Œç›®å½•ç®¡ç† ls (list)
ä½œç”¨ï¼šåˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚ å¸¸ç”¨é€‰é¡¹ï¼š ls -lï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆæƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ã€ä¿®æ”¹æ—¥æœŸï¼‰ã€‚ ls -aï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä»¥ . å¼€å¤´çš„ï¼‰ã€‚ ls -hï¼šä¸ -l é…åˆä½¿ç”¨ï¼Œä»¥äººç±»å¯è¯»çš„æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼ˆå¦‚ 1K, 2M, 3Gï¼‰ã€‚ ç¤ºä¾‹ï¼šls -lah /home/user cd (change directory)
ä½œç”¨ï¼šåˆ‡æ¢å½“å‰å·¥ä½œç›®å½•ã€‚ å¸¸ç”¨ç”¨æ³•ï¼š cd /var/logï¼šåˆ‡æ¢åˆ° /var/log ç›®å½•ã€‚ cd ..ï¼šåˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•ã€‚ cd ~ æˆ– cdï¼šåˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ cd -ï¼šåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªå·¥ä½œç›®å½•ã€‚ pwd (print working directory)
ä½œç”¨ï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚ mkdir (make directory)
ä½œç”¨ï¼šåˆ›å»ºæ–°ç›®å½•ã€‚ å¸¸ç”¨é€‰é¡¹ï¼š mkdir -p /path/to/new/dirï¼šé€’å½’åˆ›å»ºç›®å½•ï¼Œå¦‚æœçˆ¶ç›®å½•ä¸å­˜åœ¨ä¹Ÿä¼šä¸€å¹¶åˆ›å»ºã€‚ ç¤ºä¾‹ï¼šmkdir my_project rmdir (remove directory)
ä½œç”¨ï¼šåˆ é™¤ç©ºç›®å½•ã€‚ rm (remove)
ä½œç”¨ï¼šåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚ å¸¸ç”¨é€‰é¡¹ï¼š rm file.txtï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚ rm -r directory_nameï¼šé€’å½’åˆ é™¤ç›®å½•åŠå…¶æ‰€æœ‰å†…å®¹ã€‚ rm -f file.txtï¼šå¼ºåˆ¶åˆ é™¤ï¼Œä¸è¿›è¡Œæç¤ºã€‚ rm -rf directory_nameï¼šï¼ˆæ…ç”¨ï¼ï¼‰ å¼ºåˆ¶é€’å½’åˆ é™¤ç›®å½•ï¼Œä¸ä¼šæœ‰ä»»ä½•æç¤ºã€‚ cp (copy)
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-26 19:15:43 +0800 CST'>October 26, 2025</span>&nbsp;Â·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to Liunxå¸¸ç”¨å‘½ä»¤" href="http://localhost:1313/posts/cs/liunx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go åœºæ™¯é¢˜æ¨¡ç‰ˆ
    </h2>
  </header>
  <div class="entry-content">
    <p>Go åœºæ™¯é¢˜è®­ç»ƒæ‰‹å†Œ â€” é¢˜ç›®ç‰ˆ ä½œè€…ï¼šcp yang è¯´æ˜ï¼šåˆ†ä¸º åˆçº§ / ä¸­çº§ / é«˜çº§ / å®æˆ˜ Debug å››ä¸ªç« èŠ‚ã€‚æ¯é¢˜ä¸ºé¢è¯•å¸¸è§åœºæ™¯é¢˜ï¼ˆç”¨äºç»ƒä¹ ï¼‰
ğŸŸ¢ åˆçº§åœºæ™¯é¢˜ï¼ˆè¯­è¨€ç‰¹æ€§ä¸é™·é˜±ï¼‰ åˆ‡ç‰‡åœ¨å‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå½±å“å¤–éƒ¨æ•°æ®ï¼Ÿè¯·ä¸¾ä¾‹å¹¶è§£é‡Šã€‚ for range vs for i := 0; i &lt; len(slice); i&#43;&#43;ï¼Œåœ¨ä¿®æ”¹å…ƒç´ å’Œæ•ˆç‡ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ map åˆå§‹åŒ–çš„æ­£ç¡®å†™æ³•æœ‰å“ªäº›ï¼Ÿå“ªäº›å†™æ³•ä¼šå¯¼è‡´ panicï¼Ÿ defer çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿreturn ä¸ defer çš„æ‰§è¡Œé¡ºåºå¦‚ä½•ï¼Ÿ append æ‰©å®¹æ—¶å¦‚ä½•å½±å“åº•å±‚æ•°ç»„ï¼Ÿå¦‚ä½•é¿å…ä¸å¿…è¦çš„å¤åˆ¶ï¼Ÿ string ä¸ []byte è½¬æ¢åœ¨é«˜é¢‘åœºæ™¯ä¸‹çš„æ€§èƒ½é—®é¢˜å¦‚ä½•ä¼˜åŒ–ï¼Ÿ å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç®€å• mapï¼ˆæ”¯æŒ Get/Set/Deleteï¼‰ã€‚ ğŸŸ¡ ä¸­çº§åœºæ™¯é¢˜ï¼ˆå¹¶å‘ä¸æ§åˆ¶ï¼‰ å¦‚ä½•ä½¿ç”¨ sync.WaitGroup æ§åˆ¶å¹¶å‘ä»»åŠ¡ï¼Ÿè¯·ç»™å‡ºç¤ºä¾‹ï¼Œå¹¶è¯´æ˜å¸¸è§é”™è¯¯ã€‚ è®¾è®¡ä¸€ä¸ªå›ºå®šå¤§å°çš„ goroutine æ± ï¼ˆworker poolï¼‰ï¼Œèƒ½æäº¤ä»»åŠ¡å¹¶ç­‰å¾…å®Œæˆã€‚ è®¾è®¡ä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œæ”¯æŒå¤šç”Ÿäº§è€…ã€å¤šæ¶ˆè´¹è€…ï¼Œå¹¶èƒ½ä¼˜é›…é€€å‡ºã€‚ å®ç°ä¸¤ä¸ª goroutine äº¤æ›¿æ‰“å° 1~100ï¼ˆA æ‰“å° 1ï¼ŒB æ‰“å° 2ï¼Œä¾æ¬¡äº¤æ›¿ï¼‰ã€‚ å¦‚ä½•é™åˆ¶å¹¶å‘æ•°é‡ï¼ˆä¾‹å¦‚åŒæ—¶æœ€å¤š 10 ä¸ªä»»åŠ¡ï¼‰ï¼Ÿç»™å‡ºå®ç°ã€‚ ä½¿ç”¨ context å®ç°ä»»åŠ¡è¶…æ—¶ä¸å–æ¶ˆï¼Œç»™å‡ºç¤ºä¾‹ã€‚ ğŸ”´ é«˜çº§åœºæ™¯é¢˜ï¼ˆç³»ç»Ÿè®¾è®¡ä¸æ€§èƒ½ï¼‰ è®¾è®¡ä¸€ä¸ªæœ¬åœ°ç¼“å­˜ç³»ç»Ÿï¼Œæ”¯æŒ TTLã€å¹¶å‘å®‰å…¨å’Œå®šæœŸæ¸…ç†ã€‚å†™å‡ºæ ¸å¿ƒæ¥å£ä¸å®ç°è¦ç‚¹ã€‚ è®¾è®¡å¹¶å®ç°ä¸€ä¸ª LRU ç¼“å­˜ï¼ˆmap &#43; åŒå‘é“¾è¡¨ï¼‰ï¼Œè¦æ±‚å¹¶å‘å®‰å…¨ã€‚ è®¾è®¡ä¸€ä¸ªç®€æ˜“æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ”¯æŒå‘å¸ƒ/è®¢é˜…ã€å¯æŒä¹…åŒ–æ€è·¯è¯´æ˜ï¼‰ã€‚å†™å‡ºå…³é”®æ•°æ®ç»“æ„ä¸ä¼ªç ã€‚ å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„ç§’æ€ç³»ç»Ÿä»¥é˜²æ­¢è¶…å–ï¼Ÿç»™å‡ºæ¶æ„æ€è·¯ä¸å…³é”®ä»£ç ç‰‡æ®µï¼ˆRedis/æœ¬åœ°é¢„å‡åº“å­˜ç­‰ï¼‰ã€‚ è®¾è®¡ä¸€ä¸ªé™æµç»„ä»¶ï¼ˆä»¤ç‰Œæ¡¶ï¼‰ï¼Œå®ç°æ¥å£å¹¶è¯´æ˜åœ¨å¾®æœåŠ¡ç½‘å…³å¦‚ä½•ä½¿ç”¨ã€‚ âš™ï¸ å®æˆ˜ Debug åœºæ™¯é¢˜ï¼ˆæ’éšœä¸ä¼˜åŒ–ï¼‰ ç¨‹åºå‡ºç°å¤§é‡ goroutine æ³„æ¼ï¼ˆæ•°é‡ä¸æ–­å¢é•¿ï¼‰ï¼Œä½ å¦‚ä½•æ’æŸ¥ï¼Ÿåˆ—å‡ºæ’æŸ¥æ­¥éª¤ä¸ pprof ä½¿ç”¨æ–¹æ³•ã€‚ å‡ºç°æ­»é”ï¼ˆç¨‹åºå¡ä½ï¼‰ï¼Œå¦‚ä½•å®šä½å’Œä¿®å¤ï¼Ÿç»™å‡ºç¤ºä¾‹ä»£ç åŠä¿®æ”¹å»ºè®®ã€‚ ç¨‹åºå†…å­˜æš´æ¶¨å¹¶è§¦å‘ GC å‹åŠ›ï¼Œå¦‚ä½•åˆ†æåŸå› å¹¶ç»™å‡ºä¼˜åŒ–æ–¹æ¡ˆï¼Ÿ é«˜å¹¶å‘ä¸‹é”ç«äº‰ä¸¥é‡ï¼ˆé€šè¿‡ Mutex çœ‹åˆ° QPS é™ä½ï¼‰ï¼Œå¦‚ä½•è¯Šæ–­å¹¶ä¼˜åŒ–ï¼Ÿ ä½¿ç”¨ pprof æ‰¾åˆ°çƒ­ç‚¹ CPU å ç”¨ç‚¹åï¼Œä½ ä¼šå¦‚ä½•æ”¹è¿›ä»£ç ï¼Ÿç»™å‡ºä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚ </p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 22:38:03 +0800 CST'>October 22, 2025</span>&nbsp;Â·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Go åœºæ™¯é¢˜æ¨¡ç‰ˆ" href="http://localhost:1313/posts/scenario/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%A8%A1%E7%89%88/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go åœºæ™¯é¢˜æ¨¡ç‰ˆ â€” ç­”æ¡ˆç‰ˆ
    </h2>
  </header>
  <div class="entry-content">
    <p> ğŸŸ¢ åˆçº§åœºæ™¯é¢˜ï¼ˆè¯­è¨€ç‰¹æ€§ä¸é™·é˜±ï¼‰ 1. åˆ‡ç‰‡åœ¨å‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå½±å“å¤–éƒ¨æ•°æ®ï¼Ÿ æ€è·¯ï¼š åˆ‡ç‰‡æ˜¯ä¸‰å…ƒç»„ï¼ˆæŒ‡é’ˆã€lenã€capï¼‰ã€‚ä¼ å‚æ—¶ä¼šæ‹·è´è¿™ä¸‰é¡¹ï¼Œä½†åº•å±‚æ•°ç»„ä»ç„¶å…±äº«ã€‚åªæœ‰å½“ append å¯¼è‡´æ‰©å®¹ï¼ˆæ–°çš„åº•å±‚æ•°ç»„åˆ†é…ï¼‰æˆ–ä¿®æ”¹é€šè¿‡ç´¢å¼•ç›´æ¥å†™å…¥æ—¶ï¼Œå¤–éƒ¨å¯è§ã€‚
ç›´æ¥ s[i] = x ä¼šå½±å“å¤–éƒ¨ï¼› s = append(s, x) å½“ cap ä¸è¶³æ—¶ä¼šåˆ†é…æ–°æ•°ç»„ï¼Œå¤–éƒ¨ä¸ä¼šçœ‹åˆ°æ–°å…ƒç´ ã€‚ ç¤ºä¾‹ä»£ç ï¼š
package main import &#34;fmt&#34; func appendMaybe(s []int) []int { s = append(s, 100) // è‹¥ cap ä¸è¶³ï¼Œè¿™é‡Œä¼šåˆ†é…æ–°åº•å±‚æ•°ç»„ return s } func modify(s []int) { if len(s) &gt; 0 { s[0] = 999 // ä¿®æ”¹å…±äº«åº•å±‚æ•°ç»„ } } func main() { a := make([]int, 1, 1) a[0] = 1 b := appendMaybe(a) fmt.Println(&#34;a:&#34;, a) // å¦‚æœæ‰©å®¹å‘ç”Ÿï¼Œa ä¸åŒ…å« 100 fmt.Println(&#34;b:&#34;, b) c := make([]int, 1, 2) c[0] = 1 d := appendMaybe(c) fmt.Println(&#34;c:&#34;, c) // cap è¶³å¤Ÿï¼Œc ä¼šçœ‹åˆ° append çš„ç»“æœ (å¦‚æœ append reuses) fmt.Println(&#34;d:&#34;, d) modify(a) fmt.Println(&#34;a after modify:&#34;, a) // è¢«ä¿®æ”¹ } 2. for range vs for i := 0; i &lt; len(slice); i&#43;&#43; æ€è·¯ï¼š for range ä¼šåœ¨æ¯æ¬¡è¿­ä»£æ—¶æŠŠå…ƒç´ æ‹·è´åˆ°æ–°çš„å˜é‡ï¼ˆvï¼‰ï¼Œå› æ­¤ç›´æ¥ä¿®æ”¹ v ä¸ä¼šå½±å“åˆ‡ç‰‡ã€‚ç´¢å¼•è®¿é—® slice[i] ç›´æ¥è®¿é—®åº•å±‚æ•°ç»„å¯ä»¥ä¿®æ”¹åŸå€¼ã€‚æ€§èƒ½ä¸Šä¸¤è€…å·®å¼‚å¾ˆå°ï¼Œé™¤éå…ƒç´ ä¸ºå¤§ç»“æ„ä½“ï¼Œrange ä¼šæ‹·è´æ•´ä¸ªç»“æ„ä½“ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 22:38:00 +0800 CST'>October 22, 2025</span>&nbsp;Â·&nbsp;15 min</footer>
  <a class="entry-link" aria-label="post link to Go åœºæ™¯é¢˜æ¨¡ç‰ˆ â€” ç­”æ¡ˆç‰ˆ" href="http://localhost:1313/posts/scenario/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%A8%A1%E7%89%88-%E7%AD%94%E6%A1%88/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">é™æµç†”æ–­é™çº§
    </h2>
  </header>
  <div class="entry-content">
    <p> ã€Œç†”æ–­ã€é™æµã€é™çº§ã€ å®ƒä»¬éƒ½å±äºæœåŠ¡ç¨³å®šæ€§è®¾è®¡ï¼ˆService Resilienceï¼‰çš„ä¸€éƒ¨åˆ†ã€‚
ä¸‹é¢æˆ‘ç»™ä½ ä¸€ä¸ªâ€œé¢è¯•å®˜å–œæ¬¢å¬â€çš„å›ç­”æ¡†æ¶ï¼Œä»æ¦‚å¿µ â†’ åœºæ™¯ â†’ å®ç° â†’ ä¸¾ä¾‹ å››æ­¥è®²æ¸…æ¥šï¼Œ é€‚åˆç™¾åº¦è¿™ç§ç³»ç»Ÿæ¶æ„å¯¼å‘çš„å²—ä½ ğŸ‘‡
ğŸ§© ä¸€ã€ä¸‰è€…åŒºåˆ«å’Œè”ç³»ï¼ˆé«˜å±‚ç­”æ³•ï¼‰ ä¸€å¥è¯è®°å¿†ï¼š
é™æµï¼šæ§åˆ¶è¯·æ±‚é‡ï¼Œä¸è®©ç³»ç»Ÿè¢«å‹å®ã€‚ ç†”æ–­ï¼šå‘ç°ä¸‹æ¸¸æŒ‚äº†ï¼Œåˆ«å†è¯·æ±‚å®ƒã€‚ é™çº§ï¼šèµ„æºç´§å¼ æ—¶ï¼Œä¸»åŠ¨ç‰ºç‰²éƒ¨åˆ†åŠŸèƒ½ï¼Œä¿è¯æ ¸å¿ƒå¯ç”¨ã€‚ é¢è¯•å¼€å¤´å¯ä»¥è¿™æ ·è®²ï¼š
â€œåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡é™æµã€ç†”æ–­ã€é™çº§ä¸‰ç§æœºåˆ¶ä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚ ä¸‰è€…çš„æ ¸å¿ƒç›®æ ‡éƒ½æ˜¯é˜²æ­¢æœåŠ¡é›ªå´©ï¼Œåªæ˜¯ä»‹å…¥çš„æ—¶æœºä¸åŒï¼š
é™æµåœ¨è¯·æ±‚å…¥å£å¤„é˜²æ­¢æµé‡æ‰“çˆ†ï¼› ç†”æ–­åœ¨è°ƒç”¨é“¾ä¸­æ–­å¼€å¼‚å¸¸ä¾èµ–ï¼› é™çº§åˆ™åœ¨ç³»ç»Ÿå‹åŠ›å¤§æ—¶ä¸»åŠ¨ä¸¢å¼ƒéæ ¸å¿ƒåŠŸèƒ½ã€‚â€ âš™ï¸ äºŒã€é™æµï¼ˆRate Limitingï¼‰ ğŸ“˜ æ¦‚å¿µ é™åˆ¶ç³»ç»Ÿå•ä½æ—¶é—´å†…å¯å¤„ç†çš„è¯·æ±‚æ•°ã€‚
ğŸ“å¸¸è§ç®—æ³• å›ºå®šçª—å£ï¼ˆFixed Windowï¼‰ æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰ æ¼æ¡¶ç®—æ³•ï¼ˆLeaky Bucketï¼‰ ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆToken Bucketï¼‰âœ… å¸¸ç”¨ ä»¤ç‰Œæ¡¶ç®—æ³•åŸç†ï¼šç³»ç»ŸæŒ‰ç…§å›ºå®šé€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œè¯·æ±‚åªæœ‰æ‹¿åˆ°ä»¤ç‰Œæ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™æ‹’ç»æˆ–æ’é˜Ÿã€‚
ğŸ› ï¸ å®ç°æ–¹å¼ å•æœºé™æµï¼šç”¨ golang.org/x/time/rateï¼ˆGoå®˜æ–¹é™æµåŒ…ï¼‰ åˆ†å¸ƒå¼é™æµï¼šç”¨ Redis å®ç°ï¼ˆLuaè„šæœ¬ä¿è¯åŸå­æ€§ï¼‰ ç½‘å…³å±‚é™æµï¼šåœ¨ API Gatewayï¼ˆå¦‚ Kongã€Nginxã€Kratos Gatewayï¼‰é…ç½®è§„åˆ™ ğŸ’¬ ä¸¾ä¾‹ â€œæ¯”å¦‚æˆ‘åœ¨ä¸Šä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸ºé˜²æ­¢çŸ­ä¿¡æ¥å£è¢«åˆ·ï¼Œæˆ‘ä»¬åœ¨ Nginx å±‚æŒ‰ IP &#43; URI åšé™æµï¼Œç”¨ä»¤ç‰Œæ¡¶ç®—æ³•æ§åˆ¶é€Ÿç‡ä¸º 10 req/sï¼Œå¤šä½™çš„ç›´æ¥è¿”å› 429 Too Many Requestsã€‚â€
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 17:18:39 +0800 CST'>October 22, 2025</span>&nbsp;Â·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to é™æµç†”æ–­é™çº§" href="http://localhost:1313/posts/microservice/%E9%99%90%E6%B5%81%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Init
    </h2>
  </header>
  <div class="entry-content">
    <p>âœ… ä¸€ã€init() æ˜¯ä»€ä¹ˆ init() æ˜¯ Go çš„ç‰¹æ®Šå‡½æ•°ï¼Œç”¨äºåœ¨åŒ…è¢«åŠ è½½æ—¶è‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ã€‚ å®ƒä¸éœ€è¦æ˜¾å¼è°ƒç”¨ï¼Œä¹Ÿä¸èƒ½è¢«å…¶ä»–ä»£ç è°ƒç”¨ã€‚
âœ… äºŒã€init() çš„åŸºæœ¬ç‰¹æ€§ ç‰¹æ€§ è¯´æ˜ è§¦å‘æ—¶æœº åœ¨åŒ…è¢«ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰ è°ƒç”¨æ–¹å¼ Go runtime è‡ªåŠ¨è°ƒç”¨ï¼Œä¸èƒ½æ‰‹åŠ¨è°ƒç”¨ å‚æ•° æ— å‚æ•° è¿”å›å€¼ æ— è¿”å›å€¼ ä½œç”¨èŒƒå›´ æ¯ä¸ªåŒ…å¯ä»¥å®šä¹‰å¤šä¸ª init() å‡½æ•° æ‰§è¡Œé¡ºåº æŒ‰ç…§å¯¼å…¥ä¾èµ–å…³ç³»å’Œæºç å‡ºç°é¡ºåºæ‰§è¡Œ âœ… ä¸‰ã€æœ€åŸºæœ¬çš„ä¾‹å­ package main import &#34;fmt&#34; func init() { fmt.Println(&#34;init() called&#34;) } func main() { fmt.Println(&#34;main() called&#34;) } è¾“å‡ºï¼š
init() called main() called âœ… init() æ€»æ˜¯åœ¨ main() ä¹‹å‰æ‰§è¡Œã€‚
âœ… å››ã€åŒ…åˆå§‹åŒ–é¡ºåºï¼ˆé‡ç‚¹ï¼‰ Go ç¨‹åºå¯åŠ¨æ—¶ä¼šæŒ‰å¦‚ä¸‹é¡ºåºæ‰§è¡Œï¼š
å¯¼å…¥ä¾èµ–åŒ… åˆå§‹åŒ–ä¾èµ–åŒ…çš„å¸¸é‡å’Œå˜é‡ æ‰§è¡Œä¾èµ–åŒ…çš„ init() å‡½æ•° æ‰§è¡Œå½“å‰åŒ…çš„å¸¸é‡ã€å˜é‡åˆå§‹åŒ– æ‰§è¡Œå½“å‰åŒ…çš„ init() å‡½æ•° æ‰§è¡Œ main.main() ç¤ºä¾‹ï¼š // file: a.go package a import &#34;fmt&#34; var V = initVar() func initVar() int { fmt.Println(&#34;a.initVar()&#34;) return 42 } func init() { fmt.Println(&#34;a.init()&#34;) } // file: main.go package main import ( &#34;fmt&#34; &#34;example/a&#34; ) func init() { fmt.Println(&#34;main.init()&#34;) } func main() { fmt.Println(&#34;main.main()&#34;, a.V) } è¾“å‡ºï¼š
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 09:59:13 +0800 CST'>October 22, 2025</span>&nbsp;Â·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to Init" href="http://localhost:1313/posts/go/init/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Defer
    </h2>
  </header>
  <div class="entry-content">
    <p>âœ… ä¸€ã€defer çš„åŸºæœ¬ä½œç”¨ defer ç”¨æ¥å»¶è¿Ÿæ‰§è¡Œä¸€æ®µå‡½æ•°è°ƒç”¨ï¼Œç›´åˆ°å½“å‰å‡½æ•°è¿”å›æ—¶æ‰æ‰§è¡Œï¼ˆæ— è®ºæ˜¯æ­£å¸¸è¿”å›è¿˜æ˜¯é‡åˆ° panicï¼‰ã€‚
ç¤ºä¾‹ï¼š func main() { fmt.Println(&#34;A&#34;) defer fmt.Println(&#34;B&#34;) fmt.Println(&#34;C&#34;) } è¾“å‡ºï¼š
A C B ğŸ‘‰ defer çš„è°ƒç”¨ä¼šåœ¨å‡½æ•°é€€å‡ºæ—¶æ‰§è¡Œã€‚
âœ… äºŒã€å¤šä¸ª defer çš„æ‰§è¡Œé¡ºåºï¼šåè¿›å…ˆå‡º (LIFO) func main() { defer fmt.Println(&#34;1&#34;) defer fmt.Println(&#34;2&#34;) defer fmt.Println(&#34;3&#34;) } è¾“å‡ºï¼š
3 2 1 å°±åƒæ ˆä¸€æ ·ï¼Œæœ€åæ³¨å†Œçš„ defer æœ€å…ˆæ‰§è¡Œã€‚
âœ… ä¸‰ã€å‚æ•°æ±‚å€¼æ—¶æœºï¼šdefer å®šä¹‰æ—¶å°±æ±‚å€¼ è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»†èŠ‚ï¼
func main() { x := 10 defer fmt.Println(&#34;defer:&#34;, x) x = 20 fmt.Println(&#34;x =&#34;, x) } è¾“å‡ºï¼š
x = 20 defer: 10 ğŸ”¹ åŸå› ï¼š defer çš„å‚æ•°ä¼šåœ¨æ³¨å†Œ defer æ—¶ç«‹åˆ»æ±‚å€¼ï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œæ—¶æ±‚å€¼ã€‚
âœ… å››ã€é—­åŒ… deferï¼šå¼•ç”¨å¤–éƒ¨å˜é‡æ—¶ä¼šå®æ—¶è¯»å– func main() { x := 10 defer func() { fmt.Println(&#34;defer:&#34;, x) }() x = 20 fmt.Println(&#34;x =&#34;, x) } è¾“å‡ºï¼š
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 09:58:12 +0800 CST'>October 22, 2025</span>&nbsp;Â·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to Defer" href="http://localhost:1313/posts/go/defer/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/page/2/">Next&nbsp;&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">yangcp</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
