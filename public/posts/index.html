<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Posts | yangcp</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - yangcp">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css" integrity="sha256-IhHKMWS&#43;eDACT2qtKzouUghDpk&#43;PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="yangcp (Alt + H)">yangcp</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tag">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/me/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a></div>
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">26年的重点与未来规划
    </h2>
  </header>
  <div class="entry-content">
    <p>26年的重点与未来规划 算法与AI基础 leecode top100 背诵默写 top 100-200 全速刷两遍
AI应用 工作当中会做一些AI相关的应用，在AI应用进行深耕
未来的一些思考 gpt给出了一些建议：以下参考： 规划建议.pdf
</p>
  </div>
  <footer class="entry-footer"><span title='2026-01-31 09:45:39 +0800 CST'>January 31, 2026</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 26年的重点与未来规划" href="http://localhost:1313/posts/ai/2026_plan/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Dp
    </h2>
  </header>
  <div class="entry-content">
    <p>dp 通用解题方法 1. dp[?] 表示什么？ 2. dp[?] 从哪几个 dp[?] 来？ 3. dp 最小值怎么开始？ 4. dp 是正着算还是倒着算？ </p>
  </div>
  <footer class="entry-footer"><span title='2026-01-22 20:05:32 +0800 CST'>January 22, 2026</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Dp" href="http://localhost:1313/posts/datastructalgorithm/dp/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">算法模板思路总结
    </h2>
  </header>
  <div class="entry-content">
    <p> 序号 问题 对应模板 关键字提示 ① 是否是“求区间”？ 前缀和 / 差分 区间和、子数组和、多次加法、update 区间 ② 是否在求最短步数？ BFS 最少多少步、最短时间、同时扩散、找最短路径（无权图） ③ 是否有权重？ Dijkstra 每条边有代价、最小代价、带权最短路径 ④ 是否要所有结果？ 回溯 所有排列、所有组合、所有子集、选择/不选择 ⑤ 是否判断能否满足条件？ 二分 &#43; check 最小值使条件成立、最大值使条件成立、单调性 ⑥ 图结构但不是最短路 DFS 岛屿数量、连通块、树路径和 ⑦ 是否是连通性判断？ 并查集 判断是否联通、合并集合、找代表元素 ⑧ 是否需要维护递增/递减？ 单调栈 下一个更大元素、每日温度、接雨水 ⑨ 是否是一维 DP？ DP 最大子序和、打家劫舍、背包 ⑩ 是否是字符串匹配？ KMP / Trie 多次查找字符串、大文本匹配模式串、多词查找 </p>
  </div>
  <footer class="entry-footer"><span title='2025-11-27 23:49:37 +0800 CST'>November 27, 2025</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 算法模板思路总结" href="http://localhost:1313/posts/go/%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E6%80%9D%E8%B7%AF%E6%80%BB%E7%BB%93/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">高级算法模板
    </h2>
  </header>
  <div class="entry-content">
    <p> ✅ 总目录（你只要按这个顺序掌握） 类别 内容 定位 一、前缀和 &amp; 差分 区间加减 → O(1) 求和 高频基础 二、字符串 KMP、Trie 面试常客 三、BFS / DFS 多源 BFS，分层 BFS 图模板 四、拓扑排序 DAG 处理 调度/依赖 五、树与图 树直径、并查集、Dijkstra 中高级 六、回溯 子集 / N 皇后 / 剪枝 模板化即可 七、状态压缩 DP 子集 DP / bitmask 稍难但高频 八、数学 快速幂 / gcd / 组合数 必备基础 一、前缀和 &amp; 差分 ✅ 前缀和（快速求区间和） sum[i] = nums[0] &#43; ... &#43; nums[i] 区间 [l, r] 的和 = sum[r] - sum[l-1] func prefixSum(nums []int) []int { n := len(nums) pre := make([]int, n&#43;1) for i := 1; i &lt;= n; i&#43;&#43; { pre[i] = pre[i-1] &#43; nums[i-1] } return pre } ✅ 差分（区间加值） diff[i] = nums[i] - nums[i-1] 区间加 k：diff[l] &#43;= k, diff[r&#43;1] -= k func diffBuild(nums []int) []int { n := len(nums) diff := make([]int, n) diff[0] = nums[0] for i := 1; i &lt; n; i&#43;&#43; { diff[i] = nums[i] - nums[i-1] } return diff } func diffApply(diff []int) []int { for i := 1; i &lt; len(diff); i&#43;&#43; { diff[i] &#43;= diff[i-1] } return diff } 二、字符串 ✅ KMP（快速匹配） 核心：求 next 数组（最长前后缀相等长度）
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-10 21:55:50 +0800 CST'>November 10, 2025</span>&nbsp;·&nbsp;4 min</footer>
  <a class="entry-link" aria-label="post link to 高级算法模板" href="http://localhost:1313/posts/datastructalgorithm/%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">延时队列
    </h2>
  </header>
  <div class="entry-content">
    <p>使用 Redis Sorted Set (ZSet) 实现延时队列（Delay Queue）是一种高效且常用的方法，因为它利用了 ZSet 的核心特性：元素有序。
以下是基于 Redis ZSet 设计延时队列的详细步骤、关键操作和代码逻辑。
基于 Redis ZSet 的延时队列设计 1. 核心数据结构 组件 Redis 数据结构 存储内容 ZSet Score (分数) ZSet Member (成员) 作用 延迟队列 Sorted Set (ZSet) 待执行任务 任务执行时间戳 (毫秒或秒) 任务的唯一 ID (例如：order:123, task:456) 核心结构，按执行时间排序 任务详情 Hash 或 String 任务的具体内容 N/A 任务 ID 存储任务执行所需的所有数据 2. 三个核心操作 一个完整的延时队列系统由三个主要角色构成：生产者（Producer）、消费者/扫描器（Consumer/Scanner） 和 任务处理器（Executor）。
2.1 生产者：投递任务（将任务放入队列） 生产者负责将一个任务及其计划执行时间写入 Redis。
操作步骤：
确定执行时间： 计算任务应被执行的精确时间戳 T。 存储任务详情： 将任务的全部信息（如订单号、用户ID等）存储到 Redis 的 Hash 或 String 结构中，以任务 ID 为 Key。 加入 ZSet： 将任务的 ID 作为 Member，将时间戳 T 作为 Score，存入延迟队列 ZSet 中。 Redis 命令示例：
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-10 14:37:09 +0800 CST'>November 10, 2025</span>&nbsp;·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to 延时队列" href="http://localhost:1313/posts/scenario/%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">排序算法总结
    </h2>
  </header>
  <div class="entry-content">
    <p>总结——所有常见排序算法的核心思想、时间复杂度、空间复杂度、稳定性、是否原地排序、适用场景和简单例子。 下面是最全面且面试导向的总结版本👇
🧠 排序算法总览表 算法 思想 时间复杂度 空间复杂度 稳定性 原地排序 适用场景 冒泡排序 (Bubble Sort) 相邻交换，最大（或最小）元素逐步“浮出” O(n²) O(1) ✅ 稳定 ✅ 数据量小、部分有序 选择排序 (Selection Sort) 每次选择最小元素放到前面 O(n²) O(1) ❌ 不稳定 ✅ 数据量小，对交换次数敏感 插入排序 (Insertion Sort) 将未排序元素插入到已排序序列中 O(n²) O(1) ✅ 稳定 ✅ 数据基本有序时高效 希尔排序 (Shell Sort) 插入排序的改进版，分组比较减少交换 O(n¹˙³~n²) O(1) ❌ 不稳定 ✅ 中等规模数据 归并排序 (Merge Sort) 分治 &#43; 合并有序子序列 O(n log n) O(n) ✅ 稳定 ❌ 大数据、外部排序 快速排序 (Quick Sort) 分治 &#43; 基准划分 平均 O(n log n)最坏 O(n²) O(log n) ❌ 不稳定 ✅ 通用最快的内部排序 堆排序 (Heap Sort) 利用堆结构维护最大/最小值 O(n log n) O(1) ❌ 不稳定 ✅ 需要快速找最大/最小的场景 计数排序 (Counting Sort) 统计每个元素出现次数 O(n &#43; k) O(n &#43; k) ✅ 稳定 ❌ 整数、范围较小的场景 桶排序 (Bucket Sort) 按区间划分多个桶再分别排序 O(n &#43; k) O(n &#43; k) ✅ 稳定（视子排序） ❌ 数据均匀分布的浮点数 基数排序 (Radix Sort) 按位（个位→高位）排序 O(d·(n&#43;k)) O(n &#43; k) ✅ 稳定 ❌ 整数、字符串排序 🔍 各算法核心思想讲解与代码示例 1️⃣ 冒泡排序 Bubble Sort 每一轮两两比较，把最大值“冒泡”到最后。
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-05 09:29:18 +0800 CST'>November 5, 2025</span>&nbsp;·&nbsp;5 min</footer>
  <a class="entry-link" aria-label="post link to 排序算法总结" href="http://localhost:1313/posts/datastructalgorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">内存分配
    </h2>
  </header>
  <div class="entry-content">
    <p>go的内存分配 根据对象大小的不同，go的内存分配有3种类型： Tiny(size &lt; 16B): Objects of size less than 16 bytes are allocated using the mcache’s tiny allocator. This is efficient and multiple tiny allocations are done on a single 16-byte block. Small(size 16B ~ 32KB): Objects of size between 16 bytes and 32 Kilobytes are allocated on the corresponding size class(mspan) on mcache of the P where the G is running. In both tiny and small allocation if the mspan’s list is empty the allocator will obtain a run of pages from the mheap to use for the mspan. If the mheap is empty or has no page runs large enough then it allocates a new group of pages (at least 1MB) from the OS. Large(size &gt; 32KB): Objects of size greater than 32 kilobytes are allocated directly on the corresponding size class of mheap. If the mheap is empty or has no page runs large enough then it allocates a new group of pages (at least 1MB) from the OS. 总结一下Go是如何进行内存分配: mcache中如果有空闲的空间， 那么直接在mcache分配 mcache如果没有，那么尝试去mcentral中获取一个空闲的mspan mcentral中也咩有可用的mspan，那么直接去mheap向操作系统申请可用的mspan
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-31 18:10:00 +0800 CST'>October 31, 2025</span>&nbsp;·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to 内存分配" href="http://localhost:1313/posts/go/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">sql高频题
    </h2>
  </header>
  <div class="entry-content">
    <p>分为六个维度：基础聚合 → 子查询 → TopN → 窗口函数 → 业务建模 → 性能优化。
🎯 高频 SQL 题库（含答案与思路） 一、基础聚合与分组（GROUP BY / HAVING） 🧩 题 1：查询每个部门的平均工资 表结构：
employee(emp_id, emp_name, dept_id, salary) SQL：
SELECT dept_id, AVG(salary) AS avg_salary FROM employee GROUP BY dept_id; 📘 考点： 聚合函数 &#43; 分组
🧩 题 2：查询带学生数超过 10 人的老师 teacher(teacher_id, name) student(student_id, teacher_id) SQL：
SELECT teacher_id, COUNT(*) AS student_count FROM student GROUP BY teacher_id HAVING COUNT(*) &gt; 10; 📘 考点： HAVING 与 WHERE 的区别（HAVING 针对聚合后过滤）
二、子查询（Subquery） 🧩 题 3：查询工资高于本部门平均工资的员工 SELECT e.emp_name, e.salary FROM employee e JOIN ( SELECT dept_id, AVG(salary) AS avg_salary FROM employee GROUP BY dept_id ) d ON e.dept_id = d.dept_id WHERE e.salary &gt; d.avg_salary; 📘 考点： 相关子查询 vs 非相关子查询
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-27 10:26:15 +0800 CST'>October 27, 2025</span>&nbsp;·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to sql高频题" href="http://localhost:1313/posts/sql/%E9%AB%98%E9%A2%91%E9%A2%98/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Liunx常用命令
    </h2>
  </header>
  <div class="entry-content">
    <p>Linux 中非常常用和基础的命令，按照功能进行了分类：
1. 文件和目录管理 ls (list)
作用：列出目录中的文件和子目录。 常用选项： ls -l：显示详细信息（权限、所有者、大小、修改日期）。 ls -a：显示所有文件，包括隐藏文件（以 . 开头的）。 ls -h：与 -l 配合使用，以人类可读的格式显示文件大小（如 1K, 2M, 3G）。 示例：ls -lah /home/user cd (change directory)
作用：切换当前工作目录。 常用用法： cd /var/log：切换到 /var/log 目录。 cd ..：切换到上一级目录。 cd ~ 或 cd：切换到当前用户的主目录。 cd -：切换到上一个工作目录。 pwd (print working directory)
作用：显示当前所在的目录路径。 mkdir (make directory)
作用：创建新目录。 常用选项： mkdir -p /path/to/new/dir：递归创建目录，如果父目录不存在也会一并创建。 示例：mkdir my_project rmdir (remove directory)
作用：删除空目录。 rm (remove)
作用：删除文件或目录。 常用选项： rm file.txt：删除一个文件。 rm -r directory_name：递归删除目录及其所有内容。 rm -f file.txt：强制删除，不进行提示。 rm -rf directory_name：（慎用！） 强制递归删除目录，不会有任何提示。 cp (copy)
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-10-26 19:15:43 +0800 CST'>October 26, 2025</span>&nbsp;·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to Liunx常用命令" href="http://localhost:1313/posts/cs/liunx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go 场景题模版
    </h2>
  </header>
  <div class="entry-content">
    <p>Go 场景题训练手册 — 题目版 作者：cp yang 说明：分为 初级 / 中级 / 高级 / 实战 Debug 四个章节。每题为面试常见场景题（用于练习）
🟢 初级场景题（语言特性与陷阱） 切片在函数参数传递时，什么时候会影响外部数据？请举例并解释。 for range vs for i := 0; i &lt; len(slice); i&#43;&#43;，在修改元素和效率上有什么区别？ map 初始化的正确写法有哪些？哪些写法会导致 panic？ defer 的执行顺序是什么？return 与 defer 的执行顺序如何？ append 扩容时如何影响底层数组？如何避免不必要的复制？ string 与 []byte 转换在高频场景下的性能问题如何优化？ 实现一个线程安全的简单 map（支持 Get/Set/Delete）。 🟡 中级场景题（并发与控制） 如何使用 sync.WaitGroup 控制并发任务？请给出示例，并说明常见错误。 设计一个固定大小的 goroutine 池（worker pool），能提交任务并等待完成。 设计一个生产者-消费者模型，支持多生产者、多消费者，并能优雅退出。 实现两个 goroutine 交替打印 1~100（A 打印 1，B 打印 2，依次交替）。 如何限制并发数量（例如同时最多 10 个任务）？给出实现。 使用 context 实现任务超时与取消，给出示例。 🔴 高级场景题（系统设计与性能） 设计一个本地缓存系统，支持 TTL、并发安全和定期清理。写出核心接口与实现要点。 设计并实现一个 LRU 缓存（map &#43; 双向链表），要求并发安全。 设计一个简易消息队列（支持发布/订阅、可持久化思路说明）。写出关键数据结构与伪码。 如何设计一个高并发的秒杀系统以防止超卖？给出架构思路与关键代码片段（Redis/本地预减库存等）。 设计一个限流组件（令牌桶），实现接口并说明在微服务网关如何使用。 ⚙️ 实战 Debug 场景题（排障与优化） 程序出现大量 goroutine 泄漏（数量不断增长），你如何排查？列出排查步骤与 pprof 使用方法。 出现死锁（程序卡住），如何定位和修复？给出示例代码及修改建议。 程序内存暴涨并触发 GC 压力，如何分析原因并给出优化方案？ 高并发下锁竞争严重（通过 Mutex 看到 QPS 降低），如何诊断并优化？ 使用 pprof 找到热点 CPU 占用点后，你会如何改进代码？给出一个简单示例。 </p>
  </div>
  <footer class="entry-footer"><span title='2025-10-22 22:38:03 +0800 CST'>October 22, 2025</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Go 场景题模版" href="http://localhost:1313/posts/scenario/%E5%9C%BA%E6%99%AF%E9%A2%98%E6%A8%A1%E7%89%88/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/posts/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">yangcp</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
