+++
date = '2026-02-07T09:23:43+08:00'
draft = false
title = 'Pythonè¯­æ³•å¤ä¹ å­¦ä¹ é«˜çº§ç‰¹æ€§'
+++
# ğŸ§­ å­¦ä¹ è·¯çº¿æ€»è§ˆ

### ç¬¬ä¸€é˜¶æ®µï¼šPython åŸºç¡€è¯­æ³•ï¼ˆä½†ä»¥å·¥ç¨‹ç†è§£ä¸ºä¸»ï¼‰

ç›®æ ‡ï¼š**å¿«é€Ÿå»ºç«‹ Python è¯­è¨€æ¨¡å‹**

* å˜é‡ & åŠ¨æ€ç±»å‹ç³»ç»Ÿ
* æ§åˆ¶æµ
* å®¹å™¨ç±»å‹ï¼ˆlist / tuple / dict / setï¼‰
* å‡½æ•°æœºåˆ¶ï¼ˆå‚æ•°ã€è¿”å›ã€å¤šè¿”å›ï¼‰
* æ¨¡å— & åŒ…æœºåˆ¶

---

### ç¬¬äºŒé˜¶æ®µï¼šPython è¿›é˜¶ç‰¹æ€§ï¼ˆæ ¸å¿ƒèƒ½åŠ›åŒºï¼‰

ç›®æ ‡ï¼š**ç†è§£ Python ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ & æ€ä¹ˆå†™é«˜çº§ä»£ç **

* è¿­ä»£å™¨ / ç”Ÿæˆå™¨
* è£…é¥°å™¨
* ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆwithï¼‰
* æ·±æµ…æ‹·è´
* é­”æ³•æ–¹æ³•ï¼ˆdunderï¼‰
* dataclass
* ç±»å‹æ³¨è§£ & typing

---

### ç¬¬ä¸‰é˜¶æ®µï¼šå·¥ç¨‹ä¸åº•å±‚æœºåˆ¶

ç›®æ ‡ï¼š**Python å·¥ç¨‹å¸ˆçš„åˆ†æ°´å²­**

* å†…å­˜æ¨¡å‹ & GC
* GIL ä¸å¹¶å‘æ¨¡å‹
* asyncio åç¨‹
* å¹¶å‘æ¨¡å‹å¯¹æ¯”ï¼ˆthread / process / coroutineï¼‰
* å¸¸è§æ€§èƒ½å‘

---

### ç¬¬å››é˜¶æ®µï¼šé¢è¯•å®æˆ˜

* é«˜é¢‘é¢è¯•é¢˜
* åŸç†è¿½é—®
* æ‰‹æ’•ä»£ç 
* åœºæ™¯é¢˜

---

# ç¬¬ 1 è¯¾ï¼šPython åŸºç¡€è¯­æ³•æ ¸å¿ƒï¼ˆå·¥ç¨‹å¸ˆç‰ˆï¼‰

1ï¸âƒ£ å˜é‡ä¸åŠ¨æ€ç±»å‹ç³»ç»Ÿ
2ï¸âƒ£ åŸºæœ¬æ•°æ®ç±»å‹
3ï¸âƒ£ None / True / False çš„æœ¬è´¨

---

## ä¸€ã€å˜é‡ä¸åŠ¨æ€ç±»å‹ç³»ç»Ÿï¼ˆPython vs Goï¼‰

### 1. Python æ˜¯å¼ºç±»å‹ + åŠ¨æ€ç±»å‹

```python
a = 10
a = "hello"
a = [1, 2, 3]
```

å˜é‡ **ä¸æ˜¯ç±»å‹å®¹å™¨ï¼Œè€Œæ˜¯å¼•ç”¨**

ğŸ‘‰ ç±»ä¼¼ Goï¼š

```go
var a interface{}
```

### 2. Python å˜é‡æœ¬è´¨æ˜¯ï¼š**æŒ‡é’ˆ + å¯¹è±¡**

```python
a = 10
b = a
```

å†…å­˜æ¨¡å‹ï¼š

```
a â”€â”€â–¶ PyObject(10)
b â”€â”€â–¶ PyObject(10)
```

éªŒè¯ï¼š

```python
a = 10
b = a
print(id(a), id(b))   # ä¸€æ ·
```

> `id()` = å¯¹è±¡çš„å†…å­˜åœ°å€ï¼ˆCPython ä¸­ï¼‰

---

### 3. èµ‹å€¼ä¸æ˜¯æ‹·è´ï¼Œè€Œæ˜¯å¼•ç”¨ç»‘å®š

```python
a = [1, 2, 3]
b = a
b.append(4)
print(a)
```

è¾“å‡ºï¼š

```
[1, 2, 3, 4]
```

æœ¬è´¨ï¼š

```
a â”€â”€â–¶ list
b â”€â”€â–¶ same list
```

å¯¹æ¯” Goï¼š

```go
slice := []int{1,2,3}
s2 := slice
```

**è¡Œä¸ºæå…¶ç›¸ä¼¼**

---

## äºŒã€åŸºæœ¬æ•°æ®ç±»å‹

Python æ•°æ®ç±»å‹ = **6 å¤§ç±»**

| åˆ†ç±»  | ç±»å‹                     |
| --- | ---------------------- |
| æ•°å€¼  | int, float, complex    |
| å¸ƒå°”  | bool                   |
| ç©ºå€¼  | None                   |
| å­—ç¬¦ä¸² | str                    |
| å®¹å™¨  | list, tuple, set, dict |
| è¿›é˜¶  | bytes, bytearray       |

---

### 1. ä¸å¯å˜ç±»å‹ vs å¯å˜ç±»å‹ï¼ˆæé‡è¦ï¼‰

| ä¸å¯å˜   | å¯å˜        |
| ----- | --------- |
| int   | list      |
| float | dict      |
| bool  | set       |
| str   | bytearray |
| tuple |           |

ğŸ‘‰ ä¸å¯å˜å¯¹è±¡ï¼š**å†…å®¹ä¸å¯ä¿®æ”¹ï¼Œåªèƒ½æ–°å»º**

```python
a = 10
a += 1   # ä¸æ˜¯åŸåœ°ä¿®æ”¹ï¼Œè€Œæ˜¯åˆ›å»ºæ–°å¯¹è±¡
```

---

### 2. å¯å˜å¯¹è±¡çš„â€œåŸåœ°ä¿®æ”¹â€

```python
lst = [1, 2, 3]
lst.append(4)
```

**ä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡**

è¿™ç›´æ¥å½±å“ï¼š

* å¹¶å‘å®‰å…¨
* å‚æ•°ä¼ é€’
* å‡½æ•°å‰¯ä½œç”¨
* ç¼“å­˜è®¾è®¡

---

### 3. Python å‚æ•°ä¼ é€’æœ¬è´¨

**æ°¸è¿œæ˜¯ï¼šå¯¹è±¡å¼•ç”¨ä¼ é€’ï¼ˆcall by object referenceï¼‰**

```python
def foo(x):
    x.append(4)

a = [1,2,3]
foo(a)
print(a)
```

è¾“å‡ºï¼š

```
[1,2,3,4]
```

**ä½ å¯ä»¥ç›´æ¥ç±»æ¯” Go çš„ slice ä¼ å‚**

---

## ä¸‰ã€None / True / False çš„æœ¬è´¨

### 1. None æ˜¯ä¸€ä¸ªçœŸå®å¯¹è±¡

```python
None is None   # True
```

```python
type(None)
# <class 'NoneType'>
```

åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼š**å•ä¾‹**

---

### 2. True / False ä¹Ÿæ˜¯å¯¹è±¡

```python
type(True)
# <class 'bool'>
```

```python
True + 1   # 2
False + 1  # 1
```

å› ä¸ºï¼š

```
bool æ˜¯ int çš„å­ç±»
```

éªŒè¯ï¼š

```python
isinstance(True, int)  # True
```

---

### 3. Python çš„çœŸå‡åˆ¤æ–­è§„åˆ™

```python
bool(0)        -> False
bool("")       -> False
bool([])       -> False
bool(None)     -> False
```

**ç©º = False**

è¿™å†³å®šäº†ï¼š

```python
if data:
```

ç­‰ä»·äºï¼š

```python
if data is not None and len(data) > 0
```

---

> **Python = ä¸€åˆ‡çš†å¯¹è±¡ + å¼•ç”¨ä¼ é€’ + åŠ¨æ€ç±»å‹ + å¼ºç±»å‹**

---

# âœï¸ ç»ƒä¹  & æ€è€ƒé¢˜
---

### é¢˜ 1ï¼ˆå¯¹è±¡å¼•ç”¨ï¼‰

```python
a = [1,2,3]
b = a
a = [4,5,6]
print(b)
```

ğŸ‘‰ è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

---

### é¢˜ 2ï¼ˆå¯å˜å¯¹è±¡ä¼ å‚ï¼‰

```python
def f(x):
    x = [100,200]

a = [1,2,3]
f(a)
print(a)
```

ğŸ‘‰ è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

---

### é¢˜ 3ï¼ˆä¸å¯å˜å¯¹è±¡ä¼ å‚ï¼‰

```python
def f(x):
    x += 1

a = 10
f(a)
print(a)
```

ğŸ‘‰ è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

---

### é¢˜ 4ï¼ˆçœŸå‡åˆ¤æ–­ï¼‰

```python
if []:
    print("yes")
else:
    print("no")
```

# ğŸ§  ç¬¬ 2 è¯¾ï¼šdict & set â€”â€” Python çš„çµé­‚
## å‡½æ•°ä¼ å‚ tuple list set dict
> **å¦‚æœä½ çœŸæ­£ç†è§£äº† dictï¼Œä½ å°±çœŸæ­£ç†è§£äº† Pythonã€‚**

æœ¬èŠ‚ 3 ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š

1ï¸âƒ£ dict åº•å±‚ç»“æ„ & å“ˆå¸Œè¡¨åŸç†
2ï¸âƒ£ Python çš„ hash / eq æœºåˆ¶
3ï¸âƒ£ set æœ¬è´¨ & é«˜æ€§èƒ½æ ¹æº

---

# ä¸€ã€dict æ˜¯ Python çš„â€œç¬¬ä¸€å…¬æ°‘â€

Python é‡Œï¼š

* å˜é‡
* å¯¹è±¡
* æ¨¡å—
* ç±»
* å®ä¾‹
* kwargs
* globals
* locals

ğŸ‘‰ **æœ¬è´¨å…¨æ˜¯ dict**

ä¾‹å¦‚ï¼š

```python
class A:
    x = 10
```

åº•å±‚ç­‰ä»·ï¼š

```python
A.__dict__ = {"x": 10}
```

---

# äºŒã€dict åº•å±‚ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰

Python dict æ˜¯ï¼š

> **å¼€æ”¾å¯»å€å“ˆå¸Œè¡¨ï¼ˆopen addressing hash tableï¼‰**

ç»“æ„æ¨¡å‹ï¼š

```
hash(key) â†’ index â†’ table[index]
```

### æ ¸å¿ƒç‰¹æ€§ï¼š

* æŸ¥æ‰¾ï¼šO(1)
* æ’å…¥ï¼šO(1)
* åˆ é™¤ï¼šO(1)

---

# ä¸‰ã€hash & eqï¼šdict çš„åŒæ ¸å¿ƒæœºåˆ¶

dict åˆ¤æ–­ä¸¤ä¸ª key æ˜¯å¦ç›¸åŒï¼Œ**å¿…é¡»åŒæ—¶æ»¡è¶³**ï¼š

```
hash(a) == hash(b)
and
a == b
```

---

## 1ï¸âƒ£ hash å†³å®šï¼šæ¡¶ä½ç½®

```python
hash(1)
hash("abc")
hash((1,2,3))
```

---

## 2ï¸âƒ£ eq å†³å®šï¼šé€»è¾‘ç›¸ç­‰

```python
1 == True   # True
```

---

# å››ã€ç»å…¸çµé­‚é¢˜æ‹†è§£

```python
d = {}
d[1] = "a"
d[True] = "b"
print(d)
```

ä½ åˆšæ‰å·²ç»æ¨è¿‡ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç°åœ¨**å®Œæ•´æ‹†è§£**

---

## Step 1ï¼šè®¡ç®— hash

```python
hash(1) == hash(True)
```

ç»“æœï¼š

```
True
```

å› ä¸ºï¼š

```python
bool æ˜¯ int å­ç±»
True == 1
```

---

## Step 2ï¼šåˆ¤æ–­ eq

```python
1 == True   # True
```

---

## ç»“è®ºï¼š

```
key å†²çª â†’ è¦†ç›–
```

æ‰€ä»¥ï¼š

```python
{1: "b"}
```

---

# äº”ã€è¿™é“é¢˜èƒŒåç‰µå‡º Python ä¸‰å¤§æ ¸å¿ƒè®¾è®¡

1ï¸âƒ£ bool ç»§æ‰¿è‡ª int
2ï¸âƒ£ hash & eq è”åˆåˆ¤æ–­
3ï¸âƒ£ dict å†²çªè¦†ç›–æœºåˆ¶

---

# å…­ã€ä½ ç°åœ¨çš„ Go å¯¹ç…§æ¨¡å‹

Goï¼š

```go
map[int]string
```

Pythonï¼š

```python
dict[int] = value
```

åŒºåˆ«ï¼š

| ç»´åº¦        | Go     | Python |
| --------- | ------ | ------ |
| key å¯å˜    | âŒ      | âŒ      |
| hash å¯è‡ªå®šä¹‰ | âŒ      | âœ…      |
| eq å¯è‡ªå®šä¹‰   | âŒ      | âœ…      |
| å†²çªç­–ç•¥      | é“¾è¡¨/çº¢é»‘æ ‘ | å¼€æ”¾å¯»å€   |

---

# ä¸ƒã€set æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸€å¥è¯ï¼š

> **set = åªæœ‰ keyï¼Œæ²¡æœ‰ value çš„ dict**

```python
s = {1,2,3}
```

åº•å±‚æœ¬è´¨ï¼š

```python
{1: None, 2: None, 3: None}
```

---

# å…«ã€ä¸ºä»€ä¹ˆ set æŸ¥æ‰¾æå¿«ï¼Ÿ

```python
x in set_obj
```

â†’ hash å®šä½ â†’ O(1)

è€Œï¼š

```python
x in list_obj
```

â†’ çº¿æ€§æ‰«æ â†’ O(n)

---

# ä¹ã€ä¸ºä»€ä¹ˆ list ä¸èƒ½åš dict keyï¼Ÿ

å› ä¸ºï¼š

> **dict key å¿…é¡» hash å€¼ç¨³å®š**

è€Œï¼š

* list â†’ å¯å˜ â†’ hash ä¸ç¨³å®š âŒ
* tuple â†’ ä¸å¯å˜ â†’ hash ç¨³å®š âœ…

---

# åã€ä½ ç°åœ¨çš„ç†è§£å±‚çº§

ä½ å·²ç»å…·å¤‡ï¼š

ğŸ‘‰ dict + set + hash + eq + å¼•ç”¨æ¨¡å‹ + è¿ç®—ç¬¦æ¨¡å‹

è¿™å·²ç»æ˜¯ **Python å·¥ç¨‹æ ¸å¿ƒåŒº**

---

# âœï¸ æœ¬èŠ‚ç»ƒä¹ é¢˜ï¼ˆé¢è¯•çº§ï¼‰


---

### é¢˜ 1ï¼ˆå¿…è€ƒï¼‰

```python
d = {}
d[(1,2,3)] = "a"
d[(1,2,3)] = "b"
print(d)
```

---

### é¢˜ 2ï¼ˆé«˜çº§ï¼‰

```python
class A:
    def __hash__(self):
        return 1

    def __eq__(self, other):
        return True

a = A()
b = A()

d = {}
d[a] = 1
d[b] = 2
print(d)
```

---

### é¢˜ 3ï¼ˆé™·é˜±é¢˜ï¼‰

```python
s = set()
s.add((1,2,[3]))
```

```python
tuple ä¸å¯å˜æ•°ç»„  åˆå§‹åŒ– ï¼ˆï¼‰
list åˆ‡ç‰‡ å¯å˜æ•°ç»„ åˆå§‹åŒ– []
set é›†åˆ valueä¸ºç©ºçš„å­—æ®µ åˆå§‹åŒ– set
dict å­—å…¸ åˆå§‹åŒ–{} 
```
### ç»å…¸é¢˜å‹

```python
def f(x, arr=[]):
    arr = arr + [x]
    return arr

print(f(1))
print(f(2))
print(f(3))

```

