+++
date = '2025-09-18T09:34:21+08:00'
draft = false
title = '如何保证数据录入不混乱'
+++
### 如何保证数据录入不混乱
#### 数据并发
可以采用go的sync.mutex/数据库的锁/分布式锁来实现并发访问控制，在单机服务下，可以采用go的互斥锁保护临界资源。在分布式场景下，并发量不高的情况下，采用
数据库的行锁，行锁从逻辑上可以分为悲观锁和乐观锁，悲观锁通过直接for update 语句加互斥锁，在本次事务未提交之前，其他事务都不能读写当前的临界资源。乐观锁可以使用版本号，
先查询版本号，在写入数据的时候再次验证版本号，如果相同再更新。