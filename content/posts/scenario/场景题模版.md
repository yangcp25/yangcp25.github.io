+++
date = '2025-10-22T22:38:03+08:00'
draft = false
title = 'Go 场景题模版'
+++



# Go 场景题训练手册 — 题目版

作者：cp yang
说明：分为 初级 / 中级 / 高级 / 实战 Debug 四个章节。每题为面试常见场景题（用于练习）

---
## 🟢 初级场景题（语言特性与陷阱）

1. 切片在函数参数传递时，什么时候会影响外部数据？请举例并解释。
2. `for range` vs `for i := 0; i < len(slice); i++`，在修改元素和效率上有什么区别？
3. map 初始化的正确写法有哪些？哪些写法会导致 panic？
4. defer 的执行顺序是什么？return 与 defer 的执行顺序如何？
5. `append` 扩容时如何影响底层数组？如何避免不必要的复制？
6. string 与 []byte 转换在高频场景下的性能问题如何优化？
7. 实现一个线程安全的简单 map（支持 Get/Set/Delete）。

---
## 🟡 中级场景题（并发与控制）

1. 如何使用 `sync.WaitGroup` 控制并发任务？请给出示例，并说明常见错误。
2. 设计一个固定大小的 goroutine 池（worker pool），能提交任务并等待完成。
3. 设计一个生产者-消费者模型，支持多生产者、多消费者，并能优雅退出。
4. 实现两个 goroutine 交替打印 1~100（A 打印 1，B 打印 2，依次交替）。
5. 如何限制并发数量（例如同时最多 10 个任务）？给出实现。
6. 使用 `context` 实现任务超时与取消，给出示例。

---
## 🔴 高级场景题（系统设计与性能）

1. 设计一个本地缓存系统，支持 TTL、并发安全和定期清理。写出核心接口与实现要点。
2. 设计并实现一个 LRU 缓存（map + 双向链表），要求并发安全。
3. 设计一个简易消息队列（支持发布/订阅、可持久化思路说明）。写出关键数据结构与伪码。
4. 如何设计一个高并发的秒杀系统以防止超卖？给出架构思路与关键代码片段（Redis/本地预减库存等）。
5. 设计一个限流组件（令牌桶），实现接口并说明在微服务网关如何使用。

---
## ⚙️ 实战 Debug 场景题（排障与优化）

1. 程序出现大量 goroutine 泄漏（数量不断增长），你如何排查？列出排查步骤与 pprof 使用方法。
2. 出现死锁（程序卡住），如何定位和修复？给出示例代码及修改建议。
3. 程序内存暴涨并触发 GC 压力，如何分析原因并给出优化方案？
4. 高并发下锁竞争严重（通过 Mutex 看到 QPS 降低），如何诊断并优化？
5. 使用 pprof 找到热点 CPU 占用点后，你会如何改进代码？给出一个简单示例。
---

