+++
date = '2025-07-08T09:35:24+08:00'
draft = false
title = 'https原理'
tags  = ["计算机网络", "https"]
comments = true    # 确保这一行存在或为 true
+++

## 定义
### http
http是超文本传输协议，用于传输网页内容，它基于TCP，所以是可靠性传输。但是它没有解决数据安全性
方面的问题
### http安全方面的问题
* http没有对数据进行加密，任何人都可以随意读取这些数据，遭成数据的泄密。
* 其次没有认证，也就是没有办法知道数据来源的可靠性，攻击者可以中间人攻击来伪造数据
* 数据完整性，任何人可以读取也可以修改数据
### https是什么
https是http的安全版本，https基于ssl，ssl基于tls。http+数据加密+认证+数据完整性就是https。
### https怎么解决的这些问题
#### 数据加密
##### 加密算法
加密算法分为对称加密和非对称加密，还有一些摘要算法 / 哈希算法，一下是一些常见的加密算法
| 类型    | 示例               | 是否可逆 | 说明          |
| ----- | ---------------- | ---- | ----------- |
| 对称加密  | DES / AES / 3DES | ✅    | 加密解密用同一密钥   |
| 非对称加密 | RSA / ECC        | ✅    | 公钥加密，私钥解密   |
| 摘要算法  | MD5 / SHA256     | ❌    | 不可逆，用于校验完整性 |
| 签名算法  | DSA / RSA签名      | ❌    | 用私钥签名，公钥验签  |

服务器端生成密钥对，将公钥发送给客户端，客户端使用公钥加密对称加密使用的秘钥，发送给服务器端，服务器端使用私钥解密数据，
得到秘钥，后续通过这个秘钥对数据进行加密解密。
#### CA
CA（Certificate Authority）是证书颁发机构，它负责签发证书，并管理证书的颁发和吊销。
##### 为什么需要CA
客户端无法知晓拿到的公钥是由目标服务器颁发的，为了验证证书的合法性，防护中间人攻击，需要CA证书颁发机构签发证书。
##### 证书生成
首先，服务器管理员会向CA提起证书申请，CA会验证域名的所属权，做法通常是在域名解析加一个特定值。
验证通过后，CA会将服务器的公钥用自己的私钥进行签名，生成证书。并颁发给服务器管理员。
##### 证书验证过程
客户端发起连接请求，服务器会返回证书，客户端会验证证书的合法性，并获取证书的公钥。
浏览器会在发版的时候将各大CA机构的公钥预制在浏览器中，使用CA的公钥对服务器的证书进行解密，拿到解密的hash值。同时
使用同样的摘要算法对原始内容进行加密，用得到的摘要和解密的摘要对比，如果相等，说明证书是CA颁发的，也就证明
了证书的合法性和完整性。
#### 更加深入的了解https
http是超文本传输协议，它会有以下几个问题：
1. 窃听风险，由于TCP传输过程中会经过路由器、主机等多个设备，存在被截获数据的风险，泄漏密码等机密信息
2. 篡改风险，被截获的数据可能被恶意篡改，在交易等重要系统会产生非常大的破坏性
3. 身份伪造，无法知晓我们访问的服务端是否是真实的

https通过以下几个方式解决上述问题
1. 机密性，通过对称加密算法保证
2. 完整性，通过摘要算法保证（md5、sha256）
3. 身份认证，通过CA(证书颁发机构)

##### 为什么https采用了对策加密+非对称加密+CA?
只用对称加密不好解决密钥传输保存的问题，非对称加密由于加解密比较消耗资源，不适合对大量数据进行加解密。
##### tls的请求建立具体的流程和代码示例