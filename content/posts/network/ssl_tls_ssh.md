+++
date = '2025-10-15T09:27:15+08:00'
draft = true
title = 'Ssl_tls_ssh'
+++
### tls&&ssl
#### 为什么要有tls、ssl
http是明文传输有以下风险
1. 被窃听
2. 被篡改
3. 被伪造

tls通过以下三方面解决这个问题
1. 对称加密保证数据机密性
2. 数据摘要保证数据的完整性，如hmac
3. CA证书保证数据的合法性
#### 如何保证数据的安全性
首先非对称加密比对称加密更消耗资源，所以采用对称加密进行数据的加密解密这问题，但是对称加密的密钥的传输是一个问题。
这个时候可以采用非对称加密来传输对称加密所需要的密钥x
#  客户端拥有非对称密钥公钥A,私钥A`
#  服务端拥有非对称密钥公钥B,私钥B`
#  客户端向服务端发起连接请求clientHello
#  服务端返回自己的公钥A并回复serverHello
#  客户端生成对称加密的密钥x并使用服务端的公钥A进行加密并回复服务端
#  客户端使用自己的私钥A`对加密数据进行解密，拿到对称加密密钥X,并生成sessionID和密钥X的映射不用重复生成和传输
#### 中间人攻击
上面的方案存在中间人攻击的问题，数据传输会经过多个网络路由器传输，如果当前请求被劫持，攻击者可以模拟中间人在收到客户端请求的时候
将自己伪装成服务端，对客户端返回自己的公钥，并自己也模仿成客户端向服务器发送请求发送自己的公钥，这样客户端发送的密钥x就会被中间人用自己的私钥解密得到。
#### CA证书
CA 证书就是为了解决 中间人攻击的问题，对访问的服务器进行身份认证，具体的做法如下
1. 服务端将自己的域名公钥等信息发送CA,CA在验证域名所有权之后先将服务器信息进行hash运算得到数据摘要，再用自己的私钥对服务端信息进行数字签名，并将数据和签名放进数据证书。服务端会保存这个证书。
2. 客户端向服务端发起请求的时候，服务端会返回这个证书
3. 客户端讲签名通过CA的公钥对签名进行解密得到数据摘要M
4. 对服务器信息使用相同的摘要算法如sha256得到哈希值M`,对比M是否等于M`,如果相等就证明访问的服务器合法
5. 因为中间人没法知道CA的私钥，就没法伪造证书，客户端在解密的时候就会失败，摘要算法则提高了效率，保证了数据的完整性。
### ssl 建立过程

### ssh
### 参考资料
1. 
