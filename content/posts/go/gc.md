+++
date = '2025-08-01T09:10:00+08:00'
title = 'Gc'
draft = true
tag = ['go', 'gc']
+++
### 什么是GC
gc就是内存垃圾回收。c/c++这类语言可以由程序员申请内存，分配到堆上，堆上的数据随着函数结束并不会自动被清零，需要程序员手动清理。
这会给编程增加负担和隐患。高级语言如java/go支持gc,自动分析没有被引用的变量，进行内存回收。
#### 常见的GC方法
##### 引用计数法
简单的对变量的引用次数进行计数，当计数为0就会被回收。它实现简单，但无法解决循环引用的问题
##### 三色标记法
所有的根对象被置为灰色，遍历所有的灰色对象，完成后将灰色对象置为黑色对象，将灰色对象的子对象引用置为灰色。
再次遍历灰色对象，循环直到所有灰色对象遍历完。只剩下黑色对象和白色对象。黑色对象是具有引用关系的内存对象，不能被回收。
对白色对象进行回收。
### go的GC实现
#### 扫描过程
同三色标记法
#### 混合写屏障
作用是减少stw的时间，具体的做法如下：
* 插入对象直接置为黑色对象
* 
### 分析工具和分析方法

#### 如何针对GC进行优化
